# ============================================================================
# SEEG-API - Template Configuration LOCALE (Développement)
# ============================================================================
# INSTRUCTIONS :
# 1. Copiez ce fichier : cp env.local.template .env.local
# 2. Modifiez les valeurs selon votre environnement
# 3. Le système détecte automatiquement l'environnement :
#    - LOCAL : Pas de WEBSITE_SITE_NAME → charge .env.local
#    - AZURE : WEBSITE_SITE_NAME présent → charge .env ou variables Azure
# ============================================================================

# ============================================================================
# ENVIRONNEMENT
# ============================================================================
ENVIRONMENT=development
DEBUG=true
APP_NAME=One HCM SEEG Backend API (LOCAL)
APP_VERSION=1.0.0

# ============================================================================
# BASE DE DONNÉES - PostgreSQL LOCAL
# ============================================================================
# Configuration pour votre PostgreSQL local
# Base de données : recruteur
# Port : 5432
# Adaptez le nom d'utilisateur et mot de passe selon votre installation
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/recruteur
DATABASE_URL_SYNC=postgresql://postgres:postgres@localhost:5432/recruteur

# Si vous utilisez docker-compose.dev.yml, décommentez :
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/recruteur
# DATABASE_URL_SYNC=postgresql://postgres:postgres@db:5432/recruteur

# ============================================================================
# MIGRATIONS
# ============================================================================
# En local, activez l'exécution automatique des migrations au démarrage
SKIP_MIGRATIONS=false

# ============================================================================
# SÉCURITÉ - JWT
# ============================================================================
# ⚠️ Clé de développement - NE JAMAIS utiliser en production
SECRET_KEY=dev-secret-key-local-DO-NOT-USE-IN-PRODUCTION-123456789
ALGORITHM=HS256
JWT_ISSUER=seeg-hcm-api
JWT_AUDIENCE=seeg-hcm-frontend
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# CORS - Configuration permissive pour développement
# ============================================================================
# Ajoutez les ports de votre frontend local
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173,http://localhost:8000
ALLOWED_CREDENTIALS=true

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=json

# ============================================================================
# CACHE - Redis (optionnel en local)
# ============================================================================
# Laissez vide pour désactiver Redis en local
REDIS_URL=
CELERY_BROKER_URL=
CELERY_RESULT_BACKEND=

# Si vous voulez utiliser Redis en local (docker) :
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# MONITORING - Azure Application Insights
# ============================================================================
# Désactivé en local pour éviter les requêtes vers Azure
APPLICATIONINSIGHTS_CONNECTION_STRING=
ENABLE_TRACING=false
METRICS_ENABLED=false

# ============================================================================
# PERFORMANCE - Uvicorn
# ============================================================================
# 1 seul worker pour faciliter le debugging
WORKERS=1
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100
TIMEOUT_KEEP_ALIVE=5
TIMEOUT_GRACEFUL_SHUTDOWN=30

# ============================================================================
# PORT APPLICATION
# ============================================================================
WEBSITES_PORT=8000

# ============================================================================
# EMAIL - SMTP Local (Pour tester l'envoi d'emails)
# ============================================================================
# Option 1 : MailHog (recommandé pour dev)
#   docker run -d -p 1025:1025 -p 8025:8025 mailhog/mailhog
#   Interface web : http://localhost:8025
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_TLS=false
SMTP_SSL=false
MAIL_FROM_NAME=One HCM SEEG (DEV)
MAIL_FROM_EMAIL=dev@localhost

# Option 2 : Mailtrap (https://mailtrap.io)
# SMTP_HOST=smtp.mailtrap.io
# SMTP_PORT=2525
# SMTP_USERNAME=your_username
# SMTP_PASSWORD=your_password
# SMTP_TLS=true

# ============================================================================
# FRONTEND
# ============================================================================
PUBLIC_APP_URL=http://localhost:3000

# ============================================================================
# FEATURES FLAGS
# ============================================================================
RATE_LIMIT_ENABLED=false
CREATE_INITIAL_USERS=true

# ============================================================================
# HEALTH CHECK
# ============================================================================
WEBSITE_HEALTHCHECK_PATH=/monitoring/health
WEBSITE_HEALTHCHECK_MAXPINGFAILURES=10

